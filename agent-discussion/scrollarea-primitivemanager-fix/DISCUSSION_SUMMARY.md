# Обсуждение: Проблема с ScrollArea в PrimitiveManager

## Постановка задачи
В PrimitiveManager есть ScrollArea, но она не работает корректно - при большом количестве элементов не появляется вертикальная прокрутка.

## Мысли агента 1

### Анализ текущей реализации
Изучив код `PrimitiveManager.tsx:192`, я вижу следующую структуру:
```tsx
<ScrollArea style={{ flex: 1 }} p="sm">
  <Stack gap="xs">
    {primitives.map((primitive, index) => (
      <PrimitiveItem ... />
    ))}
  </Stack>
</ScrollArea>
```

### Выявленные проблемы
1. **Отсутствие явной высоты**: ScrollArea использует `flex: 1`, но может не получать корректную высоту от родителя
2. **Неопределенность высоты контейнера**: Родительский Stack имеет `height: '100%'`, но без четкого определения максимальной высоты ScrollArea может не понимать когда активировать прокрутку
3. **Потенциальные проблемы с flex-контейнером**: Mantine ScrollArea может требовать более явного задания размеров

### Предлагаемые решения
1. **Добавить explicit высоту**: Задать ScrollArea конкретную высоту или использовать `viewportProps` с `style={{ maxHeight: 'calc(100vh - 200px)' }}`
2. **Использовать ScrollArea.Autosize**: Mantine предоставляет ScrollArea.Autosize для автоматического определения высоты
3. **Проверить родительские контейнеры**: Убедиться что Paper и Stack корректно определяют свою высоту
4. **Добавить `scrollbars="y"`**: Явно указать что нужна только вертикальная прокрутка

### Рекомендуемый подход
Я рекомендую начать с варианта ScrollArea.Autosize с заданием maxHeight, так как это наиболее гибкое решение:
```tsx
<ScrollArea.Autosize 
  mah="calc(100vh - 200px)" 
  style={{ flex: 1 }}
  scrollbars="y"
  p="sm"
>
```

Также стоит проверить, правильно ли задана высота родительского Paper компонента в месте использования PrimitiveManager.

## Мысли агента 2

### Дополнительный анализ реализации

При проверке контейнера, в котором используется `PrimitiveManager`, обнаружено, что
в файле `ObjectManagementPanel.tsx` строка высоты задаётся как
`height: 'calc(100vh-60px)'`. В выражениях `calc` оператор `-` должен быть
окружён пробелами. Из‑за отсутствия пробелов свойство `height` игнорируется
браузером, поэтому контейнер растягивается по содержимому, и `ScrollArea` не
получает ограниченную высоту, из‑за чего не появляется вертикальная прокрутка.

### Предлагаемое исправление

Задать корректное выражение высоты в контейнере:

```tsx
<Box
    style={{
      width: "100%",
      height: 'calc(100vh - 60px)',
      display: 'flex',
      flexDirection: 'column',
      overflow: 'hidden',
    }}
>
```

После фикса высоты `ScrollArea` c `flex: 1` внутри `PrimitiveManager`
должен корректно активировать вертикальную прокрутку. При необходимости можно
дополнительно использовать `ScrollArea.Autosize`, как предлагал агент 1, но это
уже не критично.

## Мысли агента N
[Место для дополнительных агентов]

## Консенсус
[Будет заполнено после обсуждения всех агентов]

## Постановка для исполнения
[Финальная постановка будет сформулирована после достижения консенсуса]

