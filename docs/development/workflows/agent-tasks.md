# Агентские задачи

## Краткое описание


Документ описывает каким образом агенты должны ставить задачи и выполнять их если пользователь попросил явно сделать агентскую задачу.

Нужно учесть, что фазы могут выполняться разными агентами.

---

## Принцип работы

### Создание задачи

Когда пользователь просит создать агентскую задачу, необходимо:

1. Создать папку задачи в корневой директории `agent-tasks` с названием задачи и подпапку `phases`
2. Добавить в папку задачи документ `.md` `AGENT_TASK_SUMMARY.md`
3. Добавить в `AGENT_TASK_SUMMARY.md` ссылку на [agent-tasks.md](agent-tasks.md) с инструкцией, что нужно обязательно сверяться с требованиями при выполнении каждой из фаз
4. Провести детальное исследование кода репозитория, по результатам чего:
   - Записать в `AGENT_TASK_SUMMARY.md` подробный план выполнения задачи, разбитый по фазам, а также контекст задачи, при необходимости - с фрагментами кода
5. Описание каждой из фаз должно быть в виде постановки задачи с конкретными доработками кода
6. Разбивай фазы таким образом, чтобы после выполнения каждой промежуточной фазы приложение собиралось и работало корректно
7. Не делай слишком больших фаз, в которых агенту придется изменять более 15 файлов. Разбивай в этом случае фазы на более мелкие. Если есть однотипные изменения, разбивай крупные фазы на более мелкие по фичам

---

### Выполнение фазы задачи

**Russian:**

Когда пользователь просит выполнить фазу задачи, необходимо:

1. Найти соответствующую папку с задачей
2. Проанализировать `AGENT_TASK_SUMMARY.md`
3. Проанализировать объем планируемых изменений, если их очень много (например, изменяется больше 10 файлов), разбей фазу на более мелкие, измени список фаз в `AGENT_TASK_SUMMARY.md` и выполни первую из фаз, на которые ты разбил текущую крупную фазу
4. Выполнить фазу задачи, добавить в `/phases/phase_[number]_summary.md` описание того, что было выполнено и новый контекст для будущих фаз
5. Обогатить `AGENT_TASK_SUMMARY.md`, указать в разделе выполненной фазы статус "Выполнено", добавить необходимый контекст, который был получен в рамках реализации фазы
6. При необходимости скорректировать список будущих фаз

---

### Выполнение последней фазы

Когда агент выполняет последнюю фазу, он формирует сводку из `AGENT_TASK_SUMMARY.md` и всех файлов в `/phases` что было сделано и записывает сводку в `[папка с задачей]/TASK_COMPLETION_REPORT.md`

---

## Примечания

- При формировании списка фаз и их описания необходимо подробно описывать планируемые действия, так как разные агенты могут не очень хорошо понимать контекст
- При анализе необходимо сверяться с [принципами архитектуры](../../architecture/design-principles.md)
- После выполнения каждой из фаз добавляй в `AGENT_TASK_SUMMARY.md` ссылку на md файл фазы

## Связанные файлы

- [Design Principles](../../architecture/design-principles.md) - Архитектурные принципы
- [LLM Integration](../../features/ai-integration/llm-integration.md) - Интеграция AI агента
