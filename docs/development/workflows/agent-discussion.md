# Обсуждение доработки несколькими агентами

## Описание процесса

Данный документ описывает workflow для обсуждения задач несколькими агентами с целью выработки оптимального решения перед началом реализации.

## Принципы работы

### 1. Создание задачи на обсуждение

Пользователь создает задачу, которая требует обсуждения и анализа несколькими агентами перед реализацией.

### 2. Инициализация обсуждения

Первый агент, получивший задачу на обсуждение:
- Создает подпапку в `/agent-content/agent-discussion` с названием, отражающим суть обсуждения
- Создает в этой подпапке файл `DISCUSSION_SUMMARY.md`
- Записывает в файл постановку задачи и свои мысли о подходе к решению

### 3. Структура файла DISCUSSION_SUMMARY.md

```markdown
# Обсуждение: [Название задачи]

## Метаданные
- **Дата создания**: [YYYY-MM-DD]
- **Статус**: [Активное/Завершено/Архивировано]
- **Количество участников**: [N]
- **Приоритет**: [Высокий/Средний/Низкий]
- **Временные рамки**: [Срочность решения]

## Постановка задачи
[Описание задачи от пользователя]

## Мысли агента 1
[Анализ задачи и предложения по решению от первого агента]
- **Сложность реализации**: [1-10]
- **Риски и ограничения**: [описание]
- **Зависимости**: [от других компонентов]
- **Альтернативы**: [другие варианты решения]

## Мысли агента 2
[Анализ задачи и предложения по решению от второго агента]
- **Сложность реализации**: [1-10]
- **Риски и ограничения**: [описание]
- **Зависимости**: [от других компонентов]
- **Альтернативы**: [другие варианты решения]

## Мысли агента N
[И так далее для каждого участвующего агента]
- **Сложность реализации**: [1-10]
- **Риски и ограничения**: [описание]
- **Зависимости**: [от других компонентов]
- **Альтернативы**: [другие варианты решения]

## Комментарии пользователя
[Пользователь пишет обратную связь по промежуточным тестам предложенных решений]

## Этапы валидации
- **Быстрое прототипирование**: [результаты если проводилось]
- **Проверка обратной совместимости**: [результаты]
- **Оценка производительности**: [результаты]
- **Тестирование граничных случаев**: [результаты]

## Консенсус
[Итоговое решение, к которому пришли агенты]

## Постановка для исполнения
[Финальная постановка задачи с учетом всех обсуждений]
```

### 4. Процесс обсуждения

Каждый последующий агент:
1. Изучает `DISCUSSION_SUMMARY.md`
2. Анализирует постановку задачи
3. Изучает мысли предыдущих агентов
4. Анализирует комментарии пользователя и учитывает их в рассуждении(сообщения от пользователя имеют наивысший приоритет, всегда учитывай их при анализе)
5. Анализирует соответствующий код в проекте
6. Обязательно добавляет свой блок с мыслями и предложениями в `DISCUSSION_SUMMARY.md`
7. При необходимости предлагает пользователю попробовать корректировку для получения обратной связи
8. При необходимости корректирует или дополняет предыдущие предложения

### 5. Достижение консенсуса

Агенты продолжают обсуждение до тех пор, пока не будет достигнуто согласие по:
- Подходу к решению задачи
- Архитектурным решениям
- Техническим деталям реализации
- Пользователь подтвердил, что задача решена верно

### 6. Финализация

После достижения консенсуса агенты формулируют финальную постановку задачи для исполнения, которая включает:
- Четкое описание, что нужно сделать
- Выбранный подход к реализации
- Технические детали и ограничения
- Критерии готовности

## Критерии качества комментариев агентов

Каждый агент в своем комментарии должен обязательно указать:
- **Сложность реализации** (оценка от 1 до 10)
- **Конкретные риски и ограничения** своего подхода
- **Зависимости** от других компонентов системы
- **Альтернативные варианты** решения задачи

## Паттерны промптов для пользователей

### Создание нового обсуждения
```
ОБСУЖДЕНИЕ: [краткое название задачи]
ПРИОРИТЕТ: [Высокий/Средний/Низкий]
СРОЧНОСТЬ: [дедлайн или временные рамки]

КОНТЕКСТ:
[описание текущей ситуации и проблемы]

ЗАДАЧА:
[четкое описание что нужно достичь]

ОГРАНИЧЕНИЯ:
[технические, временные, ресурсные]

КРИТЕРИИ УСПЕХА:
[как понять что задача решена правильно]

ДОПОЛНИТЕЛЬНАЯ ИНФОРМАЦИЯ:
[ссылки на код, документацию, примеры]
```

### Добавление комментария в обсуждение
```
КОММЕНТАРИЙ К ОБСУЖДЕНИЮ: [название обсуждения]

МОЯ ОЦЕНКА предложенных решений:
- Вариант 1: [оценка и обоснование]
- Вариант 2: [оценка и обоснование]

РЕЗУЛЬТАТЫ ТЕСТИРОВАНИЯ (если проводилось):
[описание что протестировано и результаты]

НОВЫЕ ТРЕБОВАНИЯ/ОГРАНИЧЕНИЯ:
[если появились дополнительные требования]

ПРЕДПОЧТИТЕЛЬНОЕ НАПРАВЛЕНИЕ:
[какой подход кажется наиболее подходящим и почему]

ВОПРОСЫ К АГЕНТАМ:
[конкретные вопросы для уточнения]
```

### Завершение обсуждения
```
ФИНАЛИЗАЦИЯ ОБСУЖДЕНИЯ: [название]

ВЫБРАННОЕ РЕШЕНИЕ:
[краткое описание итогового подхода]

ОБОСНОВАНИЕ ВЫБОРА:
[почему именно этот вариант]

ГОТОВ К РЕАЛИЗАЦИИ: ДА/НЕТ
[если НЕТ, то что еще нужно уточнить]
```

## Преимущества подхода

- Коллективный анализ сложных задач
- Учет различных точек зрения
- Учет обратной связи от пользователя
- Снижение риска архитектурных ошибок
- Более качественная постановка задач для исполнения
- Документирование процесса принятия решений
- Структурированная коммуникация между пользователем и агентами
