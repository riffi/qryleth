# –û–±–∑–æ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ü–µ–Ω–æ–π


–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ 3D —Å—Ü–µ–Ω –∏ –µ–≥–æ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —á–∞—Å—Ç–µ–π.

---

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ü–µ–Ω —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è 3D —Å—Ü–µ–Ω –≤ Qryleth. –û–Ω –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ —Å –ò–ò, –∫–∞–Ω–≤–∞—Å Three.js –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```text
src/features/scene/
‚îú‚îÄ model/   # state logic / –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ ui/      # UI components / UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ index.ts  # public API / –ø—É–±–ª–∏—á–Ω—ã–π API
```

See [Feature-Sliced Design](../../architecture/feature-sliced-design.md) for details.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üé¨ SceneEditorR3F
**Location**: `src/pages/SceneEditor/SceneEditorR3F.tsx`

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Å—Ü–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω.

**–û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:**
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ —Å –ò–ò –∞–≥–µ–Ω—Ç–æ–º
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–Ω–≤–∞—Å–æ–º Three.js –∏ 3D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º  
- –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞–º–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã/–ø–æ–≤—Ç–æ—Ä–∞

### üé® Scene3D
**Location**: `src/features/scene/ui/Scene3D.tsx`

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–Ω–≤–∞—Å–∞ Three.js, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ 3D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é.

**–§—É–Ω–∫—Ü–∏–∏:**
- –†–µ–Ω–¥–µ—Ä–∏—Ç –æ–±—ä–µ–∫—Ç—ã —Å—Ü–µ–Ω—ã –∏ –∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π –∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### üóÇÔ∏è ObjectManager
**Location**: `src/features/scene/ui/ObjectManager.tsx`

–ü–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—è–º–∏ —Å—Ü–µ–Ω—ã, –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –æ—Å–≤–µ—â–µ–Ω–∏—è.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è–º–∏
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è
- –î–æ—Å—Ç—É–ø –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –æ–±—ä–µ–∫—Ç–æ–≤

### üí¨ ChatInterface
**Location**: `src/features/ai-assistant/ui/ChatInterface.tsx`

–í–∏–¥–∂–µ—Ç –æ–±—â–µ–Ω–∏—è —Å –ò–ò –∞–≥–µ–Ω—Ç–æ–º –¥–ª—è –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω–æ–π –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ.

**–§—É–Ω–∫—Ü–∏–∏:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω—ã

```typescript
// On page load / –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
useEffect(() => {
  if (sceneUuid) {
    // Load existing scene from IndexedDB / –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ü–µ–Ω—É –∏–∑ IndexedDB
    loadSceneFromDB(sceneUuid)
  } else {
    // Initialize new scene / –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É
    clearSceneState()
  }
}, [sceneUuid])
```

### –ü–æ—Ç–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ò–ò

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥** ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ —á–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ò–ò –∞–≥–µ–Ω—Ç—É
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ò–ò** ‚Üí –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Üí –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ü–µ–Ω—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** ‚Üí –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å—Ü–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI** ‚Üí 3D –∫–∞–Ω–≤–∞—Å –∏ –ø–∞–Ω–µ–ª–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

#### `handleSceneGenerated(sceneResponse: SceneResponse)`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—Ü–µ–Ω—ã –æ—Ç –ò–ò –∞–≥–µ–Ω—Ç–∞.(–ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

```typescript
const handleSceneGenerated = (sceneResponse: SceneResponse) => {
  // Update scene store with generated content
  updateSceneFromResponse(sceneResponse)
  
  // Save to history for undo functionality
  pushToHistory()
}
```

#### `handleObjectAdded(object: SceneObject)`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –æ—Ç –ò–ò –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

```typescript
const handleObjectAdded = (object: SceneObject) => {
  // Add object to scene
  addObject(object)
  
  // Update selection
  selectObject(object.uuid)
  
  // Save state for undo
  pushToHistory()
}
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ü–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–∏–ø–∞–º–∏ –∏–∑ [–°–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤](../../api/types/README.md):

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã —Å—Ü–µ–Ω—ã

```typescript
// Scene content types / –¢–∏–ø—ã —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ü–µ–Ω—ã
import type { 
  SceneObject,          // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
  SceneObjectInstance,  // –ò–Ω—Å—Ç–∞–Ω—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è–º–∏
  SceneData,        // –î–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω—ã, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ò–ò
  SceneLayer,        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–æ—ë–≤
  LightingSettings     // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è —Å—Ü–µ–Ω—ã
} from '@/entities'

// Scene state types / –¢–∏–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ü–µ–Ω—ã  
import type {
  SceneStatus,         // –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ü–µ–Ω—ã
  SceneMetadata        // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π —Å—Ü–µ–Ω—ã
} from '@/features/scene/model'
```

### –¢–∏–ø—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è UI

```typescript
// –¢–∏–ø—ã –≤–∏–¥–∞ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
import type {
  ViewMode,            // –†–µ–∂–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π
  RenderMode,          // R–°—Ç–∏–ª—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
  TransformMode,       // –ê–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
  SelectedObject,      // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
  HoveredObject        // –û–±—ä–µ–∫—Ç –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
} from '@/shared/types/ui'
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–î–∞–Ω–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Å—Ü–µ–Ω –ø–æ—Å—Ç—É–ø–∞—é—Ç –∏–∑ `sceneStore` (—Å–º. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞](../../api/stores/README.md)):

### –î–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ü–µ–Ω—ã

```typescript
const {
  objects,           // All scene objects / –í—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å—Ü–µ–Ω—ã
  objectInstances,   // Object instances / –ò–Ω—Å—Ç–∞–Ω—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤
  layers,           // Scene layers / –°–ª–æ–∏ —Å—Ü–µ–Ω—ã
  lighting          // Lighting settings / –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–≤–µ—â–µ–Ω–∏—è
} = useSceneStore()
```

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–æ–º

```typescript
const {
  viewMode,         // –†–µ–∂–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π
  renderMode,       // –†–µ–∂–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
  transformMode,    // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
  gridVisible       // –í–∏–¥–∏–º–æ—Å—Ç—å —Å–µ—Ç–∫–∏
} = useSceneStore()
```

### –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞

```typescript
const {
  selectedObject,   // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ
  hoveredObject     // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±—ä–µ–∫—Ç–µ –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
} = useSceneStore()
```

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω—ã

```typescript
const {
  sceneMetaData      // Scene name, status, uuid / –ò–º—è —Å—Ü–µ–Ω—ã, —Å—Ç–∞—Ç—É—Å, uuid
} = useSceneStore()
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

```typescript
const {
  history,          // –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –æ—Ç–º–µ–Ω—ã/–ø–æ–≤—Ç–æ—Ä–∞
  historyIndex,     // –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏
  undo,            // –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ
  redo             // –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ
} = useSceneStore()
```

---

## üéØ –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
SceneEditorR3F
‚îú‚îÄ‚îÄ ChatInterface                    # AI agent communication
‚îÇ   ‚îú‚îÄ‚îÄ MessageList                 # Chat history
‚îÇ   ‚îú‚îÄ‚îÄ MessageInput                # User input
‚îÇ   ‚îî‚îÄ‚îÄ ToolCallHandler             # AI tool execution
‚îú‚îÄ‚îÄ Scene3D                         # Three.js canvas
‚îÇ   ‚îú‚îÄ‚îÄ SceneContent                # 3D scene rendering
‚îÇ   ‚îú‚îÄ‚îÄ CameraControls              # Camera manipulation
‚îÇ   ‚îú‚îÄ‚îÄ ObjectRenderer              # Object visualization
‚îÇ   ‚îî‚îÄ‚îÄ PostProcessing              # Visual effects
‚îú‚îÄ‚îÄ ObjectManager                   # Scene management panel
‚îÇ   ‚îú‚îÄ‚îÄ LayerPanel                  # Layer management
‚îÇ   ‚îú‚îÄ‚îÄ ObjectTree                  # Object hierarchy
‚îÇ   ‚îú‚îÄ‚îÄ LightingPanel              # Lighting controls
‚îÇ   ‚îî‚îÄ‚îÄ ObjectEditorLauncher        # Edit object access
‚îú‚îÄ‚îÄ Toolbar                         # Top toolbar
‚îÇ   ‚îú‚îÄ‚îÄ ViewModeSelector            # Camera mode controls
‚îÇ   ‚îú‚îÄ‚îÄ RenderModeSelector          # Render style controls
‚îÇ   ‚îú‚îÄ‚îÄ TransformModeSelector       # Transform tool controls
‚îÇ   ‚îî‚îÄ‚îÄ HistoryControls             # Undo/redo buttons
‚îî‚îÄ‚îÄ Modals                          # Dialog windows
    ‚îú‚îÄ‚îÄ OpenAISettingsModal         # LLM configuration
    ‚îú‚îÄ‚îÄ SaveSceneModal              # Scene saving dialog
    ‚îî‚îÄ‚îÄ ObjectEditorR3F             # Object editing component
```

### üîß –î–µ—Ç–∞–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### **ChatInterface**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω—ã —á–µ—Ä–µ–∑ `onSceneGenerated`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —á–µ—Ä–µ–∑ `onObjectAdded`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å–∏—Å—Ç–µ–º–æ–π –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ò–ò

#### **Scene3D**
- –†–µ–Ω–¥–µ—Ä–∏—Ç `SceneContent` —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
- –í–∫–ª—é—á–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π –∏ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫—É
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –∏—Ö –≤—ã–±–æ—Ä

#### **ObjectManager**
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç `ObjectEditorR3F` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞

#### **OpenAISettingsModal**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ LLM
- –£–ø—Ä–∞–≤–ª—è–µ—Ç API –∫–ª—é—á–∞–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–æ–¥–µ–ª–∏

#### **ObjectEditorR3F**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ë—Ä–Ω—É—Ç –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ `SceneEditorR3F`
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏–º–∏—Ç–∏–≤—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

#### **SaveSceneModal**
- –õ–æ–∫–∞–ª—å–Ω—ã–π –º–æ–¥–∞–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ü–µ–Ω—ã
- –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –∏–º–µ–Ω–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ü–µ–Ω—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —á–µ—Ä–µ–∑ `db.saveScene`/`db.updateScene`

---

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ü–µ–Ω—ã

1. **Navigate to Scene Editor** without UUID parameter
2. **Initialize empty scene** with default settings
3. **Add objects** via AI chat or manual tools
4. **Configure lighting** and camera settings
5. **Organize objects** into layers
6. **Save scene** to library for future use

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ü–µ–Ω—ã

1. **Load scene** from library or direct UUID link
2. **Modify objects** using AI commands or manual tools
3. **Adjust lighting** and visual settings
4. **Use undo/redo** to manage changes
5. **Save updates** to preserve modifications

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é –ò–ò(–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

1. **Describe scene** in natural language
2. **AI generates objects** and scene structure
3. **Refine with additional commands** ("add more lighting", "move objects")
4. **Manual fine-tuning** using visual tools
5. **Export or save** final scene

---

## –°–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Selective Rendering** - –†–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã
2. **State Management** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
3. **Memory Management** - –û—á–∏—â–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã Three.js
4. **Debounced Operations** - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

```typescript
// ‚úÖ Good: Selective store subscription
const objects = useSceneStore(state => state.objects)
const selectedObject = useSceneStore(state => state.selectedObject)

// ‚ùå Bad: Full store subscription
const sceneStore = useSceneStore()

// ‚úÖ Good: Debounced auto-save
const debouncedSave = useMemo(
  () => debounce(saveScene, 2000),
  []
)

// ‚úÖ Good: Three.js resource cleanup
useEffect(() => {
  return () => {
    // Cleanup geometries, materials, textures
    cleanupThreeJSResources()
  }
}, [])
```

---

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Scene Store API](../../api/stores/scene-store.md) - Scene state management
- [Object Editing](../object-editing/README.md) - Object editor features
- [AI Integration](../ai-integration/README.md) - AI assistant capabilities
- [Type System](../../api/types/README.md) - Scene-related types
- [Component Patterns](../../architecture/patterns/component-patterns.md) - React patterns

---

## –¢–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ü–µ–Ω —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏:

### Adding New AI Tools / –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ò–ò

```typescript
// Extend available tools for AI
const EXTENDED_TOOLS = [
  ...AVAILABLE_TOOLS,
  {
    name: 'custom_scene_operation',
    description: 'Performs custom scene operation',
    parameters: {
      // Parameter schema
    }
  }
]
```

---
 
> üé¨ **–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ü–µ–Ω - —ç—Ç–æ —Å–µ—Ä–¥—Ü–µ Qryleth, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –º–æ—â–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è 3D —Å—Ü–µ–Ω —Å –ø–æ–º–æ—â—å—é –ò–ò –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.**
