# Правила работы с документацией (Doc Style Guide)

Этот документ задаёт единые правила для структуры и содержания документации в репозитории. Цель — сделать доки компактными, изолированными по зонам ответственности и без дублирования.

---

## Цели и принципы

- Разделение ответственности: каждый файл описывает один «срез» знаний.
- Ссылки вместо копипаста: при повторе — ставим ссылку на канонический документ.
- Минимум кода в доках фич; детали API — в файлах API.
- Язык: русский (API и типы — полностью по‑русски; английский только в идентификаторах и цитируемом коде).
- Актуальность: изменения публичных API и архитектуры сопровождаются обновлением соответствующих доков и changelog.

---

## Структура каталога docs

- `docs/README.md` — стартовая страница (индекс и навигация; без релиз‑нот).
- `docs/changelog.md` — история заметных изменений (релиз‑ноты).
- `docs/getting-started/*` — быстрое начало, базовые термины, краткая структура проекта.
- `docs/architecture/*` — архитектурные принципы, FSD, паттерны.
  - Каноника структуры слоёв — только в `architecture/feature-sliced-design.md`.
  - `architecture/design-principles.md` ссылается на FSD, не дублирует дерево.
- `docs/api/*` — стабильные интерфейсы: типы, сторы, компоненты, Scene API.
  - `api/types/README.md` — индекс типов.
  - `api/types/layers.md`, `api/types/terrain.md` — доменные типы.
  - Дополнительные страницы для UI/shared‑типов не создаём (только индекс + доменные типы).
  - `api/stores/*` — Zustand сторы (состав, селекторы, рекомендации).
  - `api/components/*` — публичные пропсы/контракты компонентов.
  - `api/scene-api.md` — спецификация методов Scene API.
- `docs/features/*` — пользовательские возможности, UX‑потоки, сценарии использования.
  - Много кода — не допускается; вместо этого короткие примеры + ссылки на API.
- `docs/development/*` — рабочие процессы, тестирование, инструменты, правила для агентов.
- `docs/deployment/*` — развертывание (по мере готовности).
- `docs/migrations/*` — миграции.

Каждая папка верхнего уровня содержит `README.md` с кратким оглавлением своего раздела.

---

## Инкапсуляция и границы

- Архитектура
  - Принципы и ограничения — в `architecture/design-principles.md`.
  - Детальное дерево слоёв, границы импортов, chat‑архитектура — в `architecture/feature-sliced-design.md` (каноника).
- Фичи (`docs/features/*`)
  - Что: назначение, UX‑потоки, экраны, настройки, best practices.
  - Чего нет: определения типов, спецификации стора, длинные API‑вставки.
  - Ссылки: на `docs/api/*` для типов/методов/пропсов.
- API (`docs/api/*`)
  - Что: контракты и стабильные интерфейсы (типы, методы, пропсы), лаконичные примеры.
  - Чего нет: пользовательских сценариев, обзоров UX.
- Типы (`docs/api/types/*`)
  - Только доменные страницы: `layers.md`, `terrain.md` (+ индекс `README.md`).
  - Отдельных страниц для UI/Shared‑типов не создаём.

---

## Правила оформления

- Язык: русский; англ. допускается только в именах сущностей/идентификаторах в коде.
- Структура файла: краткое описание → оглавление (по необходимости) → содержание.
- Ссылки: относительные пути, указывающие на существующие файлы.
- Изображения: по мере необходимости; хранить рядом или в общем `docs/assets/`.
- Размер примеров кода:
  - В фичах: до 10–20 строк на пример, не более 1–2 примеров в разделе.
  - В API: один компактный пример использования на метод/тип; остальное — ссылки на `examples/`.
- Нотация методов (для `Scene API`, stores, компонент):
  - Заголовок метода: «`methodName(args): ReturnType`»
  - Описание: 1–3 предложения, назначение и контекст.
  - Параметры: маркированный список `- имя: описание`.
  - Возвращает: кратко, со структурой.
  - Пример: ≤ 10–15 строк, без лишней логики.
  - Требование проекта: к каждому методу добавлять подробный комментарий на русском языке.
- Термины: использовать единообразно (см. `getting-started/terminology.md`).

---

## Changelog и обновления

- Все заметные изменения архитектуры/фич фиксируются в `docs/changelog.md`.
- Стартовая `docs/README.md` не содержит больших релиз‑нотов, только ссылку на changelog.
- При изменении публичного API/типов/сторов — обязательно обновить соответствующие страницы в `docs/api/*`.

---

## Дублирование и ссылки

- Запрещено дублировать один и тот же большой блок кода/спецификацию в разных файлах.
- Если информация нужна в нескольких местах — выбрать канонический файл и сослаться на него.
- В обзорных материалах — короткие выдержки; подробности — по ссылке.

---

## Автоматизация качества (рекомендуется)

- Проверка ссылок: скрипт на основе `markdown-link-check` или аналога.
- Линтинг Markdown: `markdownlint`/`remark-lint` (правила на длину примеров, заголовки и т.п.).
- PR‑чеклист для изменения API: «Обновлены соответствующие страницы в `docs/api/*` и changelog».

---

## Частые решения и маршрутизация

- Структура слоёв FSD: см. `architecture/feature-sliced-design.md`.
- Создание/редактирование сцен: см. `features/scene-management/README.md`.
- Типы слоёв и террейна: см. `api/types/layers.md`, `api/types/terrain.md`.
- Scene API: см. `api/scene-api.md`.
- Zustand сторы: см. `api/stores/README.md`.
- Chat компоненты и редактор сцен: см. `api/components/*`.

---

## Процесс внесения изменений

1. Определите, какой раздел отвечает за изменение (features / api / architecture / getting-started / development).
2. Внесите правки строго в соответствующий раздел, не перетаскивая чужую ответственность.
3. При необходимости добавьте ссылки из обзорных файлов (без копирования содержания).
4. Обновите `docs/changelog.md`, если изменение заметное для пользователей/архитектуры.
5. Прогоните проверку ссылок и линтер Markdown (если настроены).

