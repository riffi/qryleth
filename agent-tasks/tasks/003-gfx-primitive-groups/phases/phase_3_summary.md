# Фаза 3: Расширение UI PrimitiveManager для групп — ВЫПОЛНЕНО

## Обзор выполненных работ

Создан удобный интерфейс для управления иерархическими группами примитивов.
Пользователь может создавать группы и подгруппы, переименовывать их, менять
видимость, а также переносить группы и отдельные примитивы с помощью
drag-and-drop.

## Детальные изменения

### PrimitiveGroupItem.tsx
- Реализован компонент отображения группы с поддержкой
  разворачивания/сворачивания, переименования и переключения видимости.
- Добавлено контекстное меню для создания групп, подгрупп, переименования и
  удаления.
- Добавлена поддержка drag-and-drop и индикатор импортированных групп.

### GroupNameModal.tsx
- Добавлено модальное окно, позволяющее вводить название при создании или
  переименовании группы.

### PrimitiveItem.tsx
- Расширен для работы с drag-and-drop: добавлены свойства `onDragStart`,
  `dragOver` и `isDropTarget`.

### PrimitiveManager.tsx
- Подключены селекторы групп и назначений (`useObjectPrimitiveGroups`,
  `usePrimitiveGroupAssignments`, `useSelectedGroupUuids`).
- Дерево групп строится локально через `buildGroupTree` и `useMemo`.
- Список примитивов без группы вычисляется через `useMemo` на основе
  `primitiveGroupAssignments`.
- Добавлены состояния `expandedGroups`, `draggedItem`, `dropTarget` и полный
  набор обработчиков для создания, удаления, переименования, перемещения и
  переключения видимости групп.
- Реализован рекурсивный рендер групп и примитивов, отдельная зона «Без
  группы» и модальное окно создания/переименования.

## Соответствие критериям успешности
- Иерархия групп отображается корректно.
- Drag-and-drop перемещает примитивы и группы без потери данных.
- Контекстное меню создаёт подгруппы с корректным `parentGroupUuid`.
- Collapse/expand работает для любого уровня вложенности.
- Импортированные группы помечаются специальным значком.
- Поддерживается множественный выбор примитивов и групп.

## Файлы
- **Созданы**: `PrimitiveGroupItem.tsx`, `GroupNameModal.tsx`.
- **Изменены**: `PrimitiveManager.tsx`, `PrimitiveItem.tsx`.

## Проверка

Выполнена командa `npx tsc --noEmit` — ошибок типизации не обнаружено.

