# –§–∞–∑–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∏–ø–æ–≤ - –í–´–ü–û–õ–ù–ï–ù–û

## –û–±–∑–æ—Ä —Ñ–∞–∑—ã
**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 21 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~1.5 —á–∞—Å–∞  

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –°–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—É—é FSD-—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
–°–æ–∑–¥–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–≥–ª–∞—Å–Ω–æ Feature-Sliced Design:

```
src/
‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/           # –ë–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/             # –û–±—â–∏–µ UI —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ events.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts        # –ì–ª–∞–≤–Ω—ã–π barrel export
‚îÇ   ‚îú‚îÄ‚îÄ api/                # API –∏ Database —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îÇ       ‚îî‚îÄ‚îÄ r3f/            # R3F —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã
‚îÇ           ‚îú‚îÄ‚îÄ index.ts
‚îÇ           ‚îî‚îÄ‚îÄ types.ts
‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îî‚îÄ‚îÄ scene/
‚îÇ       ‚îî‚îÄ‚îÄ model/          # Scene feature —Ç–∏–ø—ã
‚îÇ           ‚îú‚îÄ‚îÄ index.ts
‚îÇ           ‚îú‚îÄ‚îÄ store-types.ts
‚îÇ           ‚îî‚îÄ‚îÄ view-types.ts
‚îî‚îÄ‚îÄ entities/
    ‚îî‚îÄ‚îÄ index.ts            # –î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
```

### 2. ‚úÖ –°–æ–∑–¥–∞–ª–∏ –±–∞—Ä–µ–ª—å–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã (barrel exports)
–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∏–ø–æ–≤ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç —É–¥–æ–±–Ω—ã–µ index.ts —Ñ–∞–π–ª—ã:

- `src/shared/types/index.ts` - –≥–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç shared —Ç–∏–ø–æ–≤
- `src/shared/types/core/index.ts` - —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ç–∏–ø—ã  
- `src/shared/types/ui/index.ts` - UI —Ç–∏–ø—ã
- `src/shared/api/index.ts` - API —Ç–∏–ø—ã
- `src/features/scene/model/index.ts` - scene feature —Ç–∏–ø—ã
- `src/entities/index.ts` - –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### 3. ‚úÖ –ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ —Ç–∏–ø—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω–æ FSD

#### **Core Types** ‚Üí `shared/types/core/`
- ‚úÖ Vector3, Transform (re-export –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–æ–≤

#### **UI Types** ‚Üí `shared/types/ui/`
- ‚úÖ ViewMode, RenderMode, TransformMode
- ‚úÖ SelectedObject, HoveredObject
- ‚úÖ –°–æ–±—ã—Ç–∏—è: SceneClickEvent, SceneHoverEvent, ObjectTransformEvent, PrimitiveTransformEvent

#### **Store Types** ‚Üí `features/scene/model/store-types.ts`  
- ‚úÖ SceneStoreState, SceneStoreActions, SceneStore
- ‚úÖ SceneStatus, SceneMetaData
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö store –¥–µ–π—Å—Ç–≤–∏–π

#### **View Types** ‚Üí `features/scene/model/view-types.ts`
- ‚úÖ UseSceneEventsReturn, UseObjectSelectionReturn
- ‚úÖ UsePrimitiveSelectionReturn, UseSceneHistoryReturn
- ‚úÖ Hook return types –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### **API Types** ‚Üí `shared/api/types.ts`
- ‚úÖ BaseDbRecord, SceneRecord, ObjectRecord
- ‚úÖ ConnectionRecord, SettingsRecord
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–∑ database.ts —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

#### **R3F Technical Types** ‚Üí `shared/lib/r3f/types.ts`
- ‚úÖ R3FCanvasConfig, R3FPerformanceConfig, R3FCameraControls
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö R3F —Ç–∏–ø–æ–≤

### 4. ‚úÖ –û–±–µ—Å–ø–µ—á–∏–ª–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
–°–æ–∑–¥–∞–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–∏–∞—Å—ã –¥–ª—è smooth migration:

- `entities/r3f/types-aliases.ts` - –∞–ª–∏–∞—Å—ã –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
- `shared/lib/database.ts` - re-export database —Ç–∏–ø–æ–≤ –∏–∑ `shared/api`
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —á–∏—Å—Ç–æ—Ç–∞**
- –°–æ–±–ª—é–¥–µ–Ω—ã –≤—Å–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã Feature-Sliced Design
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–ª–æ—è–º: shared ‚Üí features ‚Üí entities
- –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü

### üì¶ **–£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- Barrel exports –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–∏–ø–æ–≤
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞: `@/shared/types`, `@/features/scene/model`
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

### üîÑ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏**
- –ù–µ—Ç breaking changes - –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–∏–∞—Å—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**
- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**: 11
- **Barrel exports**: 6 —Ñ–∞–π–ª–æ–≤
- **Type —Ñ–∞–π–ª–æ–≤**: 5 —Ñ–∞–π–ª–æ–≤
- **Alias —Ñ–∞–π–ª–æ–≤**: 1 —Ñ–∞–π–ª (–≤—Ä–µ–º–µ–Ω–Ω—ã–π)

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞

### **–î–æ –º–∏–≥—Ä–∞—Ü–∏–∏** (–≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):
```typescript
import type { ViewMode, SceneStore } from '@/entities/r3f/types'
import type { BaseDbRecord } from '@/shared/lib/database' 
```

### **–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```typescript
// –û–±—â–∏–µ UI —Ç–∏–ø—ã
import type { ViewMode, SelectedObject } from '@/shared/types/ui'

// Core —É—Ç–∏–ª–∏—Ç—ã
import type { Vector3, Transform } from '@/shared/types/core'

// Scene feature —Ç–∏–ø—ã
import type { SceneStore, SceneStoreActions } from '@/features/scene/model'

// API —Ç–∏–ø—ã
import type { SceneRecord, ObjectRecord } from '@/shared/api'

// Entities
import type { GfxObject, GfxPrimitive } from '@/entities'
```

## –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏—è FSD**
- Store —Ç–∏–ø—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–∑ entities –≤ features
- UI —Ç–∏–ø—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ shared
- Database —Ç–∏–ø—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ shared/api

### ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- shared –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ entities/features  
- features –º–æ–≥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ entities –∏ shared
- entities —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –¥–æ–º–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É

### ‚úÖ **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–∏–º —Ñ–∞–∑–∞–º**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–∏–∞—Å—ã –ø–æ–∑–≤–æ–ª—è—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ù–µ—Ç —Ä–∏—Å–∫–∞ –ø–æ–ª–æ–º–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–∑

### **–ì–æ—Ç–æ–≤–æ –∫ –§–∞–∑–µ 3**: –ú–∏–≥—Ä–∞—Ü–∏—è Store –∏ Feature —Ç–∏–ø–æ–≤
- ‚úÖ –ù–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–∏–∞—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã  
- ‚úÖ –í—Å–µ imports –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### **–í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏**:
1. `features/scene/store/sceneStore.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å store —Ç–∏–ø–æ–≤
2. `entities/r3f/types-aliases.ts` - –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
3. –í—Å–µ hook —Ñ–∞–π–ª—ã –≤ `features/scene/hooks/`

### **–†–∏—Å–∫–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–∑**:
- **–ù–ò–ó–ö–ò–ô —Ä–∏—Å–∫** –¥–ª—è hook return types (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã)
- **–°–†–ï–î–ù–ò–ô —Ä–∏—Å–∫** –¥–ª—è UI types (–º–Ω–æ–≥–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏)  
- **–í–´–°–û–ö–ò–ô —Ä–∏—Å–∫** –¥–ª—è store types (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### ‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ TypeScript
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç 
- –ù–æ–≤—ã–µ barrel exports —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**  
- –°–æ–±–ª—é–¥–µ–Ω—ã –ø—Ä–∏–Ω—Ü–∏–ø—ã Feature-Sliced Design
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ**
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- Barrel exports –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**–ì–æ—Ç–æ–≤—ã –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –§–∞–∑—ã 3**: –ú–∏–≥—Ä–∞—Ü–∏—è Store –∏ Feature —Ç–∏–ø–æ–≤

–§–∞–∑–∞ 2 —Å–æ–∑–¥–∞–ª–∞ –ø—Ä–æ—á–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–º—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –∏–º–ø–æ—Ä—Ç–æ–≤ –±–µ–∑ —Ä–∏—Å–∫–∞ breaking changes.