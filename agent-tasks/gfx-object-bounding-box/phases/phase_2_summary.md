# Фаза 2: Функции вычисления BoundingBox - Выполнено

## Описание
Созданы утилиты для автоматического вычисления BoundingBox примитивов и объектов с учетом их трансформаций.

## Выполненные действия

### 1. Создан файл `src/shared/lib/geometry/boundingBoxUtils.ts`

Реализованы следующие функции:

#### `calculatePrimitiveBoundingBox(primitive: GfxPrimitive): BoundingBox`
Главная функция для вычисления BoundingBox любого примитива. Использует дискриминированные типы для безопасной работы с различными типами примитивов:
- `box` - вычисляет для всех 8 вершин куба с применением трансформаций
- `sphere` - учитывает радиус и трансформации
- `cylinder` - использует максимальный из радиусов (top/bottom) и высоту
- `cone` - основан на радиусе основания и высоте
- `pyramid` - использует размер основания и высоту
- `plane` - плоскость с нулевой толщиной по Z
- `torus` - учитывает major и minor радиусы

#### `mergeBoundingBoxes(boxes: BoundingBox[]): BoundingBox`
Объединяет несколько BoundingBox в один, находя общий минимум и максимум по всем осям.

#### `calculateObjectBoundingBox(object: GfxObject): BoundingBox`
Вычисляет BoundingBox для объекта на основе его примитивов:
1. Вычисляет BoundingBox для каждого примитива объекта
2. Объединяет все BoundingBox примитивов в один общий
3. Обрабатывает случай пустого объекта (без примитивов)

### 2. Поддержка трансформаций

Реализована функция `applyTransform()` которая применяет к вершинам:
- **Масштабирование** - умножение координат на значения scale
- **Поворот** - применение поворотов вокруг осей X, Y, Z (в радианах)
- **Смещение** - добавление значений position к координатам

Порядок применения трансформаций: масштабирование → поворот → смещение

### 3. Математически корректные вычисления

- Для примитивов с простой геометрией (sphere, cylinder) используется аппроксимация через базовые формы
- Для box и других примитивов с вершинами вычисляются все ключевые точки с трансформациями
- Все функции возвращают корректные min/max координаты после применения трансформаций

## Новый контекст для будущих фаз

- Утилиты BoundingBox готовы к использованию во всей системе
- Поддерживаются все типы примитивов из текущей системы типов
- Трансформации примитивов корректно учитываются при вычислениях
- Функции оптимизированы для производительности
- Код следует принципам Feature-Sliced Design (размещен в `src/shared/lib`)

## Технические детали

### Импорты и зависимости
```typescript
import type { BoundingBox, Vector3 } from '@/shared/types'
import type { GfxPrimitive, GfxObject } from '@/entities'
```

### Производительность
- Избегание лишних вычислений для простых случаев (один BoundingBox при merge)
- Оптимизированный алгоритм поиска min/max через `Math.min/max(...array)`
- Кэширование не реализовано на данном этапе (может быть добавлено в будущих фазах)

## Следующие шаги
Готова к выполнению Фаза 3: интеграция функций вычисления BoundingBox в места создания объектов в системе.