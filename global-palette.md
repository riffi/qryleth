# üü¢ –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ –¥–ª—è –ò–ò –∞–≥–µ–Ω—Ç–∞: –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–∞–ª–∏—Ç—Ä

## üéØ –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É **–≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–∞–ª–∏—Ç—Ä —Ü–≤–µ—Ç–æ–≤** –≤ Qryleth, —á—Ç–æ–±—ã:
- –°—Ü–µ–Ω–∞ –∏–º–µ–ª–∞ –æ–¥–Ω—É –ø–∞–ª–∏—Ç—Ä—É, —É–ø—Ä–∞–≤–ª—è—é—â—É—é —Ü–≤–µ—Ç–∞–º–∏ —Ç–µ—Ä—Ä–µ–π–Ω–∞, –≤–æ–¥—ã, –Ω–µ–±–∞, —Ç—É–º–∞–Ω–∞ –∏ –æ–±—ä–µ–∫—Ç–æ–≤.
- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–≥–ª–∏ –±—Ä–∞—Ç—å —Ü–≤–µ—Ç –ª–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é (`fixed`), –ª–∏–±–æ –∏–∑ —Ä–æ–ª–∏ –ø–∞–ª–∏—Ç—Ä—ã (`role`).
- –í –±—É–¥—É—â–µ–º —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –±—ã –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤—Å–µ–π —Å—Ü–µ–Ω—ã –æ–¥–Ω–æ–π –ø–∞–ª–∏—Ç—Ä–æ–π.


## üìÇ –ù–æ–≤—ã–µ —Ç–∏–ø—ã

### –ü–∞–ª–∏—Ç—Ä–∞
```
export type PaletteRole =
  | 'sky' | 'fog' | 'water'
  | 'foliage' | 'wood' | 'rock' | 'metal', 'sand', 'ground', 'snow',  'accent';


export interface GlobalPalette {
  uuid: string;
  name: string;
  colors: Record<PaletteRole, string>;
}
```

###–ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–≤–µ—Ç–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
```
export type ColorSource =
  | { type: 'fixed' }                                      // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ color
  | { type: 'role'; role: PaletteRole; tint?: number };    // –≤–∑—è—Ç—å –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π tint

export interface GfxMaterial {
  uuid: string;
  name: string;
  color?: string;                // –µ—Å–ª–∏ fixed
  colorSource?: ColorSource;     // –µ—Å–ª–∏ role
  // –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (roughness, metalness –∏ —Ç.–¥.)
}

export interface SceneData {
  uuid: string;
  name: string;
  paletteUuid?: string;            // —Å—Å—ã–ª–∫–∞ –Ω–∞ GlobalPalette
  // –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è (—Å–ª–æ–∏, –æ–±—ä–µ–∫—Ç—ã, –æ—Å–≤–µ—â–µ–Ω–∏–µ)
}
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
###–†–µ–∑–æ–ª–≤ —Ü–≤–µ—Ç–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

–ï—Å–ª–∏ colorSource.type === 'fixed' ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º material.color.
–ï—Å–ª–∏ colorSource.type === 'role' ‚Üí –±–µ—Ä—ë–º —Ü–≤–µ—Ç –∏–∑ palette.colors[role].

–ï—Å–ª–∏ –µ—Å—Ç—å tint (–æ—Ç -1 –¥–æ +1), –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —è—Ä–∫–æ—Å—Ç—å:
- tint > 0 ‚Üí –æ—Å–≤–µ—Ç–ª—è–µ–º.
- tint < 0 ‚Üí –∑–∞—Ç–µ–º–Ω—è–µ–º.


### –¢–µ—Ä—Ä–µ–π–Ω
–í GfxMultiColorPaletteStop –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –∏–∑ colorSource?: ColorSource;

### –í–æ–¥–∞
–¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–∏–¥–∞ –≤–æ–¥—ã —Ü–≤–µ—Ç –≤–æ–¥—ã –±–µ—Ä—ë–º –∏–∑ palette.colors.water

### –¢—É–º–∞–Ω –∏ –Ω–µ–±–æ

–¶–≤–µ—Ç —Ç—É–º–∞–Ω–∞ –±–µ—Ä—ë–º –∏–∑ palette.colors.fog.
–¶–≤–µ—Ç –Ω–µ–±–∞/—Å–∫–∞–π–¥–æ–º–∞ –±–µ—Ä—ë–º –∏–∑ palette.colors.sky.

## –í —Ä–∞–Ω—Ç–∞–π–º–µ

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ü–µ–Ω—ã —Ä–µ–∑–æ–ª–≤–∏–º –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —á–µ—Ä–µ–∑ resolveMaterialColor.

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –ø–∞–ª–∏—Ç—Ä—É ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —à–µ–π–¥–µ—Ä–Ω—ã–µ uniform‚Äô—ã (—Ç—É–º–∞–Ω, —Å–∫–∞–π).

## –ü–∞–ª–∏—Ç—Ä—ã –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
```
export const QRYLETH_DEFAULT: GlobalPalette = {
  uuid: 'default',
  name: 'Qryleth Default',
  colors: {
    sky: '#7fb3ff',
    fog: '#9fb8c8',
    water: '#4aa3c7',
    foliage: '#4a7c59',
    wood: '#6a4b3b',
    rock: '#8a8a8a',
    metal: '#9fa3a7',
    sand:  '#d9c18f',
    ground:'#6b4f36',
    snow:  '#ffffff',      
    accent:'#d98f4a',
  }
};

export const QRYLETH_AUTUMN: GlobalPalette = {
  uuid: 'autumn',
  name: 'Qryleth Autumn',
  colors: {
    sky:    '#d0a36b', // —Ç—ë–ø–ª–æ–µ –æ—Å–µ–Ω–Ω–µ–µ –Ω–µ–±–æ, —Å –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º
    fog:    '#c7a98c', // –º—è–≥–∫–∏–π —Ç—É–º–∞–Ω —Å –±–µ–∂–µ–≤–æ-—Å–µ—Ä—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º
    water:  '#4a7c7c', // —á—É—Ç—å –±–æ–ª–µ–µ —Ö–æ–ª–æ–¥–Ω–∞—è, –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω–∞—è –≤–æ–¥–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞
    foliage:'#c56b2c', // –ª–∏—Å—Ç–≤–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π (–∑–æ–ª–æ—Ç–∞—è –æ—Å–µ–Ω—å)
    wood:   '#8b5a2b', // –Ω–∞—Å—ã—â–µ–Ω–Ω–æ-–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π, —Å—É—Ö–∞—è –¥—Ä–µ–≤–µ—Å–∏–Ω–∞
    rock:   '#7f7f7f', // —Å–µ—Ä–æ-–∫–∞–º–µ–Ω–Ω—ã–π, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    metal:  '#9fa3a7', // –æ—Å—Ç–∞–≤–ª—è–µ–º –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º
    sand:   '#d8b56a', // –ø–µ—Å–æ–∫ —Ç–µ–ø–ª–µ–µ, —Å –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–º –æ—Ç–ª–∏–≤–æ–º
    ground: '#7c4a2d', // –∑–µ–º–ª—è ‚Äî —Ç—ë–ø–ª—ã–π –∫–æ—Ä–∏—á–Ω–µ–≤–æ-–∫—Ä–∞—Å–Ω—ã–π
    snow:   '#f2f2f2', // –ª—ë–≥–∫–∏–π –∫—Ä–µ–º–æ–≤–æ-–±–µ–ª—ã–π, —á—Ç–æ–±—ã –Ω–µ –≤—ã–±–∏–≤–∞–ª—Å—è –∏–∑ –æ–±—â–µ–π –≥–∞–º–º—ã
    accent: '#e07a3c', // —è—Ä–∫–∏–π –∞–∫—Ü–µ–Ω—Ç ‚Äî —Ç—ã–∫–≤–µ–Ω–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π
  }
};
```

## –î–û—Ä–∞–±–æ—Ç–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ü–≤–µ—Ç–∞ - role, –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ü–≤–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –ø–∞–ª–∏—Ç—Ä–µ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–π —Ä–æ–ª–∏.

## –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–æ–≤
–í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –æ–±—ä–µ–∫—Ç–∞ –≤ –ø–∞–Ω–µ–ª–∏ —Å–≤–æ–π—Å—Ç–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–∞–≤–∞—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ü–≤–µ—Ç–∞: fixed / role.
–ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω fixed - —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ü–≤–µ—Ç–æ–º –∫–∞–∫ —Å–µ–π—á–∞—Å
–ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω role - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ü–≤–µ—Ç + –∫—Ä—É—Ç–∏–ª–∫—É –¥–ª—è tint

## –î–æ—Ä–∞–±–æ—Ç–∫–∞ sceneObjectManager
–î–æ–±–∞–≤–∏—Ç—å –≤ sceneObjectManager –≤—ã–±–æ—Ä –ø–∞–ª–∏—Ç—Ä—ã –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–∞–ª–∏—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—Ç—å –µ–µ –≤–æ –≤—Å–µ—Ö —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–∞—Ö —Å—Ü–µ–Ω—ã
