---
task_id: 5
phase: 6.5
title: Маршрутизация, страницы эпиков и 404
status: done
created: 2025-08-19
updated: 2025-08-19
---

# Фаза 6.5: Маршрутизация, страницы эпиков и 404

## Статус
✅ Выполнено

## Цели фазы
- Внедрить полноценную клиентскую маршрутизацию через React Router
- Обеспечить переходы с изменением URL между основными страницами
- Добавить страницу деталей эпика и страницу 404
- Сгруппировать содержимое и список задач эпика во вкладках
- Привести ширину контейнера на странице эпика к фиксированной (как на странице задачи)

## Выполненная работа

1) Подключение роутера
- Файл: `apps/agent-tasks-ui/frontend/src/main.tsx`
- Добавлена обёртка `<BrowserRouter>` вокруг `<App />`, чтобы навигация управлялась через URL

2) Настройка маршрутов приложения
- Файл: `apps/agent-tasks-ui/frontend/src/App.tsx`
- Добавлены маршруты:
  - `/` — дашборд
  - `/tasks` — список задач
  - `/tasks/:id` — детальная страница задачи
  - `/epics` — список эпиков
  - `/epics/:id` — детальная страница эпика (новая)
  - `*` — страница 404 (новая)
- Навигация по задачам и эпикам переведена на переходы через `navigate()`

3) Навигация (меню)
- Файл: `apps/agent-tasks-ui/frontend/src/components/Navigation.tsx`
- Компонент навигации теперь использует ссылки роутера (`Link`) и подсветку активного пункта по текущему пути

4) Переход по клику на задачу
- Файл: `apps/agent-tasks-ui/frontend/src/components/TasksPage.tsx`
- При клике по задаче выполняется переход на адрес `/tasks/{id}` через роутер (если внешний колбэк не передан)

5) Детальная страница задачи — интеграция с роутером
- Файл: `apps/agent-tasks-ui/frontend/src/pages/TaskDetailPage.tsx`
- Получение `id` задачи из `useParams`, переход «Назад» осуществляется на `/tasks`

6) Новая страница деталей эпика с контентом и вкладками
- Файл: `apps/agent-tasks-ui/frontend/src/pages/EpicDetailPage.tsx`
- Загрузка эпика (`getEpicById`) и его задач (`getEpicTasks`)
- Вкладки: «Содержимое» (Markdown с подсветкой кода, YAML-шапка не отображается) и «Задачи (N)»
- Клик по задаче ведёт на `/tasks/{id}`
- Контейнер страницы приведён к фиксированной ширине как у страницы задачи

7) Страница 404
- Файл: `apps/agent-tasks-ui/frontend/src/pages/NotFoundPage.tsx`
- Показ сообщения и кнопка возврата на главную

8) Сборка
- Выполнена успешная сборка фронтенда `npm run build`

## Технические детали
- Использован `react-router-dom` и компонент `BrowserRouter`
- Для Markdown использованы `react-markdown` + `rehype-highlight` (единый стиль с карточкой задачи)
- YAML-шапка скрывается при рендере контента и на странице задачи, и на странице эпика
- Компоненты снабжены русскоязычными комментариями к ключевым блокам логики

## Результат
- Переходы между страницами выполняются через роутер с изменением URL
- Добавлена полноценная страница эпика с вкладками «Содержимое»/«Задачи»
- Добавлена страница 404 для неизвестных маршрутов
- Приведена ширина контейнера страницы эпика к макету страницы задачи

